# booster-task-analyser

This module is used for static analysing.

## Performance Analysis

Start performance analysis by executing the following command

```bash
./gradlew analysePerformanceDebug
```

or 

```bash
./gradlew analysePerformanceRelease
```

or

```bash
./gradlew analysePerformance
```

### Analyser Reports

The [dot](https://www.graphviz.org/doc/info/lang.html) format reports is located at `build/reports/${variant}/booster-task-analyser/`,  you can convert the dot files to PNGs by using the following command:

```bash
find build/reports -name '*.dot' | xargs -t -I{} dot -O -Tpng {}
```

Here is an example generated by dot:

![com.didiglobal.booster.demo.MainActivity](../assets/com.didiglobal.booster.demo.MainActivity.dot.png)

## Properties

The following table shows the properties that analyser supports:

| Property                         | Description                                                                                   | Example                             |
| -------------------------------- | --------------------------------------------------------------------------------------------- | ----------------------------------- |
| `booster.task.analyser.blacklist` | URI of API black list（Using [built-in API list](src/main/resources/blacklist.txt) by default）| file:///Users/booster/blacklist.txt |
| `booster.task.analyser.whitelist` | URI of API white list（Using [built-in API list](src/main/resources/whitelist.txt) by default）| file:///Users/booster/whitelist.txt |

The properties can be passthrough the command line as following:

```bash
./gradlew assembleDebug -Pbooster.task.analyser.whitelist=file:///Users/booster/whitelist.txt
```

or configured in the `gradle.properties`:

```properties
booster.task.analyser.whitelist=file:///Users/booster/whitelist.txt
```

## Reference Analysis

Start reference analysis by executing the following command

```bash
./gradlew analyseReferenceDebug
```

or

```bash
./gradlew analyseReferenceRelease
```

or

```bash
./gradlew analyseReference
```

The reports are located at `build/reports/booster-task-analyser/reference/`
